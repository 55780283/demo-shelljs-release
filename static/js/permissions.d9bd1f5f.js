(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["permissions"],{"02d3":function(t,e,a){"use strict";var i=a("51a2"),s=a.n(i);s.a},"37b9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-container",[a("page-header",{attrs:{title:"管理员列表"}}),a("page-btns-bar",[a("i-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.addAdmin}},[t._v("添加管理员")])],1),a("page-content",[a("Table",{staticClass:"table",attrs:{size:"small",stripe:"",border:"",columns:t.columns,data:t.list},on:{"on-selection-change":t.selectChange}})],1)],1)},s=[],n=(a("7f7f"),a("ac6a"),a("a358")),o={data:function(){return{list:[],columns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"英文名",key:"name",width:100,align:"center"},{title:"中文名",key:"name_cn",width:100,align:"center"},{title:"角色",width:140,align:"center",render:function(t,e){var a=[];e.row.role.forEach(function(t){a.push(t.name)});var i=a.join(",");return t("span",i)}},{title:"性别",width:80,align:"center",render:function(t,e){return 1===e.row.gender?t("span","女"):t("span","男")}},{title:"手机号",key:"mobile",width:120,align:"center"},{title:"邮箱",key:"email",width:160,align:"center"},{title:"状态",width:80,align:"center",render:function(t,e){return 1===e.row.status?t("span","在职"):t("span","离职")}},{title:"创建时间",key:"created_at",width:160,align:"center"},{title:"更新时间",key:"updated_at",width:160,align:"center"},{title:"备注",key:"note",minWidth:160,align:"center"},{title:"操作",width:270,fixed:"right",render:function(t,e){return t("div",[t("router-link",{props:{to:"/adminedit/".concat(e.row.id)},class:"editbtnclass"},"编辑")])}}]}},methods:{selectChange:function(){},getList:function(){var t=this;n["a"].get_admins({cb:function(e){0==e.code&&(t.list=e.data.list)}})},addAdmin:function(){this.$router.push("/adminedit/new")}},created:function(){this.getList()}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},"3e1d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-container",[a("page-header",{attrs:{title:"新增/编辑管理员"}}),a("page-content",[a("div",[a("div",{staticClass:"title2"},[t._v("基本属性")]),a("picuploader",{attrs:{src:t.info.header,size:t.picuploader_size,name:"头像"},on:{picuploaded:t.headerUploaded}}),a("pair",[a("div",{staticClass:"required",attrs:{slot:"name"},slot:"name"},[t._v("英文名")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.info.name,callback:function(e){t.$set(t.info,"name",e)},expression:"info.name"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("中文名")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.info.name_cn,callback:function(e){t.$set(t.info,"name_cn",e)},expression:"info.name_cn"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("性别")]),a("RadioGroup",{attrs:{slot:"value",size:"large"},slot:"value",model:{value:t.info.gender,callback:function(e){t.$set(t.info,"gender",e)},expression:"info.gender"}},[a("Radio",{attrs:{label:0}},[t._v("男")]),a("Radio",{attrs:{label:1}},[t._v("女")])],1)],1),a("pair",[a("div",{staticClass:"required",attrs:{slot:"name"},slot:"name"},[t._v("邮箱")]),a("Input",{attrs:{slot:"value",disabled:"new"!==t.$route.params.id},slot:"value",model:{value:t.info.email,callback:function(e){t.$set(t.info,"email",e)},expression:"info.email"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("手机号")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.info.mobile,callback:function(e){t.$set(t.info,"mobile",e)},expression:"info.mobile"}})],1)],1),a("div",[a("div",{staticClass:"title2"},[t._v("其它属性")]),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("状态")]),a("RadioGroup",{attrs:{slot:"value",size:"large"},slot:"value",model:{value:t.info.status,callback:function(e){t.$set(t.info,"status",e)},expression:"info.status"}},[a("Radio",{attrs:{label:1}},[t._v("在职")]),a("Radio",{attrs:{label:0}},[t._v("离职")])],1)],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("角色")]),a("Select",{staticStyle:{width:"260px"},attrs:{slot:"value",multiple:""},slot:"value",model:{value:t.info.role_id,callback:function(e){t.$set(t.info,"role_id",e)},expression:"info.role_id"}},t._l(t.roleList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("pair",[a("span",{class:{required:"new"===t.$route.params.id},attrs:{slot:"name"},slot:"name"},[t._v("用户密码")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.info.password,callback:function(e){t.$set(t.info,"password","string"===typeof e?e.trim():e)},expression:"info.password"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("备注")]),a("Input",{attrs:{slot:"value",type:"textarea"},slot:"value",model:{value:t.info.note,callback:function(e){t.$set(t.info,"note",e)},expression:"info.note"}})],1),a("i-button",{staticStyle:{margin:"10px 10px"},attrs:{type:"primary",size:"large",disabled:t.savebtn},on:{click:t.save}},[t._v("提交")]),t.bindbtn?a("i-button",{staticStyle:{margin:"10px 0"},attrs:{type:"warning",size:"large"},on:{click:t.bind}},[t._v("绑定")]):t._e()],1)])],1)},s=[],n=(a("456d"),a("7f7f"),a("ac6a"),a("a358")),o={data:function(){return{savebtn:!1,bindbtn:!1,info:{name:"",name_cn:"",gender:0,header:"",email:"",mobile:"",status:1,note:"",role_id:[],password:""},roleList:[],picuploader_size:{width:"120px",height:"120px"},splitRate:.6}},methods:{getRoleList:function(){var t=this;n["a"].get_roles({cb:function(e){if(0==e.code){var a=[];e.data.list.forEach(function(t){if(1==t.status){var e={};e.value=t.id,e.label=t.name,a.push(e)}}),t.roleList=a}}})},getInfo:function(){var t=this;n["a"].get_admin_detail({id:this.$route.params.id,cb:function(e){0==e.code&&Object.keys(t.info).forEach(function(a){t.info[a]=e.data[a]})}})},save:function(){var t=this;if(this.info.name&&this.info.email)if("new"===this.$route.params.id){if(!this.info.password)return void this.$Message.error({content:"必填参数缺失",duration:3});n["a"].add_admin({params:this.info,cb:function(e){0==e.code?(t.savebtn=!0,t.$Message.success("添加成功")):309==e.code&&(t.bindbtn=!0,t.$Message.warning({content:"该用户已存在，请点击绑定！",duration:3}))}})}else n["a"].edit_admin({id:this.$route.params.id,params:this.info,cb:function(e){0==e.code&&t.$Message.success("修改成功")}});else this.$Message.error({content:"必填参数缺失",duration:3})},bind:function(){var t=this;n["a"].bind_admin({params:this.info,cb:function(e){0==e.code&&t.$Message.success("绑定成功")}})},headerUploaded:function(t){this.info.header=t}},created:function(){this.getRoleList(),"new"!==this.$route.params.id&&this.getInfo()}},l=o,r=(a("02d3"),a("2877")),d=Object(r["a"])(l,i,s,!1,null,"cf8958ca",null);e["default"]=d.exports},"51a2":function(t,e,a){},bfd6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-container",[a("page-header",{attrs:{title:"权限列表"}}),a("page-btns-bar",[a("i-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.showAddModal}},[t._v("添加权限")])],1),a("page-content",[a("Table",{staticClass:"table",attrs:{loading:t.table_loading,size:"small",stripe:"",border:"",columns:t.columns,data:t.list},on:{"on-selection-change":t.selectChange}}),a("mypage",{attrs:{pageData:t.pageData},on:{pageChange:t.pageChange}}),a("Modal",{attrs:{width:"600px",title:t.updatemodaltitle},on:{"on-ok":t.updatePermission},model:{value:t.addeditmodal,callback:function(e){t.addeditmodal=e},expression:"addeditmodal"}},[a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("URL名称：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.name,callback:function(e){t.$set(t.permissionData,"name",e)},expression:"permissionData.name"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("标题：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.title,callback:function(e){t.$set(t.permissionData,"title",e)},expression:"permissionData.title"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("上级ID：")]),a("Select",{attrs:{slot:"value",filterable:""},slot:"value",model:{value:t.permissionData.parent_id,callback:function(e){t.$set(t.permissionData,"parent_id",e)},expression:"permissionData.parent_id"}},t._l(t.parentPerOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("http方法：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.http_method,callback:function(e){t.$set(t.permissionData,"http_method",e)},expression:"permissionData.http_method"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("等级：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.level,callback:function(e){t.$set(t.permissionData,"level",e)},expression:"permissionData.level"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("排序：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.order,callback:function(e){t.$set(t.permissionData,"order",e)},expression:"permissionData.order"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("状态：")]),a("RadioGroup",{attrs:{slot:"value"},slot:"value",model:{value:t.permissionData.status,callback:function(e){t.$set(t.permissionData,"status",e)},expression:"permissionData.status"}},[a("Radio",{attrs:{label:0}},[t._v("禁用")]),a("Radio",{attrs:{label:1}},[t._v("启用")])],1)],1)],1)],1)],1)},s=[],n=(a("7f7f"),a("ac6a"),a("a358")),o={computed:{parentPerOptions:function(){var t=[];return this.listAll.forEach(function(e){var a={};a.label=e.name,a.value=e.id,t.push(a)}),t}},data:function(){var t=this;return{list:[],listAll:[],table_loading:!1,searchData:{page:1},pageData:{total:0,perPage:1,currentPage:1},permissionData:{name:"",title:"",parent_id:"",http_method:"",level:"",order:"",status:1},editId:"",addeditmodal:!1,updatemodaltitle:"",columns:[{title:"权限URL名称",key:"name",align:"center",width:180},{title:"标题",key:"title",align:"center",width:140},{title:"上级ID",key:"parent_id",align:"center",width:80},{title:"http方法",key:"http_method",align:"center",width:100},{title:"级别",key:"level",align:"center",width:80},{title:"排序",key:"order",align:"center",width:80},{title:"状态",align:"center",width:80,render:function(t,e){return 1===e.row.status?t("span","启用"):t("span","禁用")}},{title:"创建时间",key:"created_at",align:"center",width:160},{title:"更新时间",key:"updated_at",align:"center",width:160},{title:"操作",minWidth:100,fixed:"right",render:function(e,a){return e("div",[t.$makeBtn(e,"text","编辑",t.showEditModal,a.row)])}}]}},methods:{selectChange:function(){},showAddModal:function(){this.updatemodaltitle="添加权限",this.permissionData.name="",this.permissionData.status=1,this.addeditmodal=!0},showEditModal:function(t){this.updatemodaltitle="修改权限",this.permissionData.name=t.name,this.permissionData.status=t.status,this.permissionData.title=t.title,this.permissionData.parent_id=t.parent_id,this.permissionData.http_method=t.http_method,this.permissionData.level=t.level,this.permissionData.order=t.order,this.editId=t.id,this.addeditmodal=!0},getList:function(){var t=this;this.table_loading=!0,n["a"].get_permissions_list({params:this.searchData,cb:function(e){0==e.code&&(t.list=e.data.list,t.pageData.total=e.data.total,t.pageData.perPage=e.data.perPage,t.pageData.currentPage=e.data.currentPage,t.table_loading=!1)}})},getListAll:function(){var t=this;n["a"].get_permissions_simple_list({cb:function(e){0==e.code&&(t.listAll=e.data.list)}})},updatePermission:function(){var t=this;"添加权限"==this.updatemodaltitle?n["a"].add_permission({params:this.permissionData,cb:function(e){0==e.code&&(t.getList(),t.$Message.success("添加成功！"))}}):n["a"].edit_permission({id:this.editId,params:this.permissionData,cb:function(e){0==e.code&&(t.getList(),t.$Message.success("修改成功！"))}})},pageChange:function(t){this.searchData.page=t,this.getList()}},created:function(){this.getList(),this.getListAll()}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},e0ec:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-container",[a("page-header",{attrs:{title:"角色列表"}}),a("page-btns-bar",[a("i-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.showAddModal}},[t._v("添加角色")])],1),a("page-content",[a("Table",{staticClass:"table",attrs:{size:"small",stripe:"",border:"",columns:t.columns,data:t.list},on:{"on-selection-change":t.selectChange}}),a("Modal",{attrs:{width:"600px",title:t.updatemodaltitle},on:{"on-ok":t.updateRole},model:{value:t.addeditmodal,callback:function(e){t.addeditmodal=e},expression:"addeditmodal"}},[a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("角色名称：")]),a("Input",{attrs:{slot:"value"},slot:"value",model:{value:t.roleData.name,callback:function(e){t.$set(t.roleData,"name",e)},expression:"roleData.name"}})],1),a("pair",[a("span",{attrs:{slot:"name"},slot:"name"},[t._v("角色状态：")]),a("RadioGroup",{attrs:{slot:"value"},slot:"value",model:{value:t.roleData.status,callback:function(e){t.$set(t.roleData,"status",e)},expression:"roleData.status"}},[a("Radio",{attrs:{label:0}},[t._v("禁用")]),a("Radio",{attrs:{label:1}},[t._v("启用")])],1)],1)],1),a("Modal",{attrs:{width:"600px",title:"修改权限"},on:{"on-ok":t.updatePermission},model:{value:t.updatepermissionmodal,callback:function(e){t.updatepermissionmodal=e},expression:"updatepermissionmodal"}},[a("Tree",{attrs:{data:t.permissionOptions,"show-checkbox":""},on:{"on-check-change":t.permissionChange}})],1)],1)],1)},s=[],n=(a("ac6a"),a("7f7f"),a("a358")),o={data:function(){var t=this;return{list:[],roleData:{name:"",status:1},editId:"",addeditmodal:!1,updatepermissionmodal:!1,updatemodaltitle:"",permissionOptions:[],selectedPermissions:[],columns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"角色名称",key:"name",align:"center"},{title:"状态",align:"center",render:function(t,e){return 1===e.row.status?t("span","启用"):t("span","禁用")}},{title:"创建时间",key:"created_at",align:"center"},{title:"更新时间",key:"updated_at",align:"center"},{title:"操作",width:180,fixed:"right",render:function(e,a){return e("div",[t.$makeBtn(e,"text","编辑",t.showEditModal,a.row),t.$makeBtn(e,"text","修改权限",t.showChangePerModal,a.row)])}}]}},methods:{selectChange:function(){},showAddModal:function(){this.updatemodaltitle="添加角色",this.roleData.name="",this.roleData.status=1,this.addeditmodal=!0},showEditModal:function(t){this.updatemodaltitle="修改角色",this.roleData.name=t.name,this.roleData.status=t.status,this.editId=t.id,this.addeditmodal=!0},getList:function(){var t=this;n["a"].get_roles({cb:function(e){0==e.code&&(t.list=e.data.list)}})},updateRole:function(){var t=this;"添加角色"==this.updatemodaltitle?n["a"].add_role({params:this.roleData,cb:function(e){0==e.code&&(t.getList(),t.$Message.success("添加成功！"))}}):n["a"].edit_role({id:this.editId,params:this.roleData,cb:function(e){0==e.code&&(t.getList(),t.$Message.success("修改成功！"))}})},getPermissionsOptions:function(t){var e=this;n["a"].get_permissions_simple_list({cb:function(a){if(0==a.code){var i=[];a.data.list.forEach(function(s){if(0==s.parent_id){var n={};n.title=s.title,n.value=s.id,e.$inArray(s.id,t)&&(n.checked=!0),n.children=[],a.data.list.forEach(function(i){if(i.parent_id==s.id){var o={};o.title=i.title,o.value=i.id,e.$inArray(i.id,t)&&(o.checked=!0),o.children=[],a.data.list.forEach(function(a){if(a.parent_id==i.id){var s={};s.title=a.title,s.value=a.id,e.$inArray(a.id,t)&&(s.checked=!0),o.children.push(s)}}),n.children.push(o)}}),i.push(n)}}),e.permissionOptions=i}}})},showChangePerModal:function(t){var e=this;n["a"].get_role_detail({id:t.id,cb:function(a){0==a.code&&(e.getPermissionsOptions(a.data.admin_menu_id),e.selectedPermissions=a.data.admin_menu_id,e.editId=t.id,e.updatepermissionmodal=!0)}})},permissionChange:function(t){var e=this;this.selectedPermissions=[],t.forEach(function(t){e.selectedPermissions.push(t.value)})},updatePermission:function(){var t=this;n["a"].update_role_permission({id:this.editId,params:{menu_id:this.selectedPermissions},cb:function(e){0==e.code&&t.$Message.success("修改成功！")}})}},created:function(){this.getList()}},l=o,r=a("2877"),d=Object(r["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports}}]);